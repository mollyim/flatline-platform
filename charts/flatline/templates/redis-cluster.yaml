{{- $componentName := "redis-cluster" -}}
{{- $componentValues := .Values.redisCluster -}}

{{- $ctx := dict
    "Release"          .Release
    "Chart"            .Chart
    "Values"           .Values
    "Capabilities"     .Capabilities
    "Files"            .Files
    "Template"         .Template
    "componentName"    $componentName
    "componentValues"  $componentValues
-}}

{{- if $ctx.componentValues.enabled -}}

{{ template "common.statefulSet" $ctx }}
---
{{ template "common.service" $ctx }}
---
{{ template "common.configMap" $ctx }}
---
{{ template "common.job" $ctx }}

{{- end -}}
