# Example, relatively minimal, configuration that passes validation (see `io.dropwizard.cli.CheckCommand`)
#
# `unset` values will need to be set to work properly.
# Most other values are technically valid for a local/demonstration environment, but are probably not production-ready.

logging:
  level: INFO
  appenders:
    - type: console
      threshold: ALL
      timeZone: UTC
      target: stdout
    - type: logstashtcpsocket
      destination: example.com:10516
      apiKey: secret://datadog.apiKey
      environment: staging

metrics:
  reporters:
    - type: signal-datadog
      frequency: 10 seconds
      tags:
        - "env:staging"
        - "service:chat"
      udpTransport:
        statsdHost: {{ include "common.fullname" . }}-otel-collector
        port: 8125
      excludesAttributes:
        - m1_rate
        - m5_rate
        - m15_rate
        - mean_rate
        - stddev
      useRegexFilters: true
      excludes:
        - ^.+\.total$
        - ^.+\.request\.filtering$
        - ^.+\.response\.filtering$
        - ^executor\..+$
        - ^lettuce\..+$
  reportOnStop: true

tlsKeyStore:
  password: secret://tlsKeyStore.password

# FLT(uoemai): All forms of payment are disabled in the prototype.
stripe:
  apiKey: secret://stripe.apiKey
  idempotencyKeyGenerator: secret://stripe.idempotencyKeyGenerator
  boostDescription: >
    Example
  supportedCurrenciesByPaymentMethod:
    CARD:
      - usd
      - eur
    SEPA_DEBIT:
      - eur

# FLT(uoemai): All forms of payment are disabled in the prototype.
braintree:
  merchantId: unset
  publicKey: unset
  privateKey: secret://braintree.privateKey
  environment: unset
  graphqlUrl: unset
  merchantAccounts:
    # ISO 4217 currency code and its corresponding sub-merchant account
    'xts': unset
  supportedCurrenciesByPaymentMethod:
    PAYPAL:
      - usd
  pubSubPublisher:
    project: example-project
    topic: example-topic
    credentialConfiguration: |
      {
        "credential": "configuration"
      }

# FLT(uoemai): All forms of payment are disabled in the prototype.
googlePlayBilling:
  credentialsJson: secret://googlePlayBilling.credentialsJson
  packageName: package.name
  applicationName: test
  productIdToLevel: {}

# FLT(uoemai): All forms of payment are disabled in the prototype.
appleAppStore:
  env: SANDBOX
  bundleId: bundle.name
  appAppleId: 12345
  issuerId: abcdefg
  keyId: abcdefg
  encodedKey: secret://appleAppStore.encodedKey
  subscriptionGroupId: example_subscriptionGroupId
  productIdToLevel: {}
  appleRootCerts: []

appleDeviceCheck:
  production: false
  teamId: 0123456789
  bundleId: bundle.name

deviceCheck:
  backupRedemptionDuration: P30D
  backupRedemptionLevel: 201

dynamoDbClient:
  region: us-east-1 # AWS Region

dynamoDbTables:
  accounts:
    tableName: Accounts
    phoneNumberTableName: Accounts_PhoneNumbers
    phoneNumberIdentifierTableName: Accounts_PhoneNumberIdentifiers
    usernamesTableName: Accounts_Usernames
    usedLinkDeviceTokensTableName: Accounts_UsedLinkDeviceTokens
  appleDeviceChecks:
    tableName: AppleDeviceChecks
  appleDeviceCheckPublicKeys:
    tableName: AppleDeviceCheckPublicKeys
  backups:
    tableName: Backups
  clientReleases:
    tableName: ClientReleases
  deletedAccounts:
    tableName: DeletedAccounts
  deletedAccountsLock:
    tableName: DeletedAccountsLock
  issuedReceipts:
    tableName: IssuedReceipts
    expiration: P30D # Duration of time until rows expire
    generator: abcdefg12345678= # random base64-encoded binary sequence
    maxIssuedReceiptsPerPaymentId:
      STRIPE: 1
      BRAINTREE: 1
      GOOGLE_PLAY_BILLING: 1
      APPLE_APP_STORE: 1
  ecKeys:
    tableName: Keys
  ecSignedPreKeys:
    tableName: EC_Signed_Pre_Keys
  pqKeys:
    tableName: PQ_Keys
  pagedPqKeys:
    tableName: PQ_Paged_Keys
  pqLastResortKeys:
    tableName: PQ_Last_Resort_Keys
  messages:
    tableName: Messages
    expiration: P30D # Duration of time until rows expire
  onetimeDonations:
    tableName: OnetimeDonations
    expiration: P90D
  phoneNumberIdentifiers:
    tableName: PhoneNumberIdentifiers
  profiles:
    tableName: Profiles
  pushChallenge:
    tableName: PushChallenge
  pushNotificationExperimentSamples:
    tableName: PushNotificationExperimentSamples
  redeemedReceipts:
    tableName: RedeemedReceipts
    expiration: P30D # Duration of time until rows expire
  registrationRecovery:
    tableName: RegistrationRecovery
    expiration: P300D # Duration of time until rows expire
  remoteConfig:
    tableName: RemoteConfig
  reportMessage:
    tableName: ReportMessage
  scheduledJobs:
    tableName: ScheduledJobs
    expiration: P7D
  subscriptions:
    tableName: Subscriptions
  clientPublicKeys:
    tableName: ClientPublicKeys
  verificationSessions:
    tableName: VerificationSessions

pagedSingleUseKEMPreKeyStore:
  endpointOverride: http://{{ include "common.fullname" . }}-localstack:4566 # AWS endpoint
  bucket: whisper-service-pre-key-store # S3 Bucket name
  region: us-east-1                     # AWS region

cacheCluster: # Redis server configuration for cache cluster
  configurationUri: redis://{{ include "common.fullname" . }}-redis-cluster:6379/

pubsub: # Redis server configuration for pubsub cluster
  uri: redis://{{ include "common.fullname" . }}-redis-cluster:6379/

pushSchedulerCluster: # Redis server configuration for push scheduler cluster
  configurationUri: redis://{{ include "common.fullname" . }}-redis-cluster:6379/

rateLimitersCluster: # Redis server configuration for rate limiters cluster
  configurationUri: redis://{{ include "common.fullname" . }}-redis-cluster:6379/

directoryV2:
  client: # Configuration for interfacing with Contact Discovery Service v2 cluster
    userAuthenticationTokenSharedSecret: secret://directoryV2.client.userAuthenticationTokenSharedSecret
    userIdTokenSharedSecret: secret://directoryV2.client.userIdTokenSharedSecret

# FLT(uoemai): Secure value recovery is disabled in the prototype.
svr2:
  uri: svr2.example.com
  userAuthenticationTokenSharedSecret: secret://svr2.userAuthenticationTokenSharedSecret
  userIdTokenSharedSecret: secret://svr2.userIdTokenSharedSecret
  svrCaCertificates:
    - |
      -----BEGIN CERTIFICATE-----
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      AAAAAAAAAAAAAAAAAAAA
      -----END CERTIFICATE-----

# FLT(uoemai): Secure value recovery is disabled in the prototype.
svrb:
  uri: svrb.example.com
  userAuthenticationTokenSharedSecret: secret://svrb.userAuthenticationTokenSharedSecret
  userIdTokenSharedSecret: secret://svrb.userIdTokenSharedSecret
  svrCaCertificates:
    - |
      -----BEGIN CERTIFICATE-----
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      AAAAAAAAAAAAAAAAAAAA
      -----END CERTIFICATE-----

messageCache: # Redis server configuration for message store cache
  persistDelayMinutes: 1
  cluster:
    configurationUri: redis://{{ include "common.fullname" . }}-redis-cluster:6379/

gcpAttachments: # GCP Storage configuration
  domain: example.com
  email: user@example.cocm
  maxSizeInBytes: 1024
  pathPrefix:
  rsaSigningKey: secret://gcpAttachments.rsaSigningKey

tus:
  uploadUri: http://{{ include "common.fullname" . }}-tus
  userAuthenticationTokenSharedSecret: secret://tus.userAuthenticationTokenSharedSecret

# FLT(uoemai): Notification providers are replaced by a dummy logger during development.
# Apple Push Notifications configuration
apn:
  sandbox: true
  bundleId: com.example.textsecuregcm
  keyId: secret://apn.keyId
  teamId: secret://apn.teamId
  signingKey: secret://apn.signingKey

# FLT(uoemai): Notification providers are replaced by a dummy logger during development.
# FCM configuration
fcm:
  credentials: secret://fcm.credentials

cdn:
  bucket: whisper-service-cdn
  credentials:
    accessKeyId: secret://cdn.accessKey        # Irrelevant with LocalStack.
    secretAccessKey: secret://cdn.accessSecret # Irrelevant with LocalStack.
  region: us-east-1
  endpointOverride: http://{{ include "common.fullname" . }}-localstack:4566

cdn3StorageManager:
  baseUri: https://storage-manager.example.com
  clientId: example
  clientSecret: secret://cdn3StorageManager.clientSecret
  sourceSchemes:
    2: gcs
    3: r2

dogstatsd:
  environment: dev
  host: {{ include "common.fullname" . }}-otel-collector

openTelemetry:
  # FLT(uoemai): Migrate from StatsD to OTel. Enabling this currently triggers an error with Redis.
  enabled: false
  environment: dev
  url: http://{{ include "common.fullname" . }}-otel-collector:{{ .Values.otelCollector.service.ports.http.port }}/

unidentifiedDelivery:
  # FLT(uoemai): Associated test data generated by Whisper service component:
  # Args: certificate --ca
  #   Public key : BS50DVku0RuHuV5TXgNKHanKFCQ9rHlDtnMR0JREO+cB
  #   Private key: gCxslt94cNHE2ahesiY8eH8vf8O983iiTsnLUrplGVU=
  # Args: certificate --key=gCxslt94cNHE2ahesiY8eH8vf8O983iiTsnLUrplGVU= --id=5
  #   Certificate: CiUIBRIhBRQpPcIfqznYmLkvb+ZBgFTyFv/Nt5I8snZbTq9AUNMGEkDNQUtWxnz0EA0vhk9+kFfmJuTW7F0625h91j/4O0YFOl6lpnkaOsKqnVrfVHT3gbstsh/dMqFN14w3Y/xcwxAJ
  #   Private key: KBfpvC0nnWBdxgA091zEhCEQo30N/f2ONQBsDY8mZEA=
  certificate: CiUIBRIhBRQpPcIfqznYmLkvb+ZBgFTyFv/Nt5I8snZbTq9AUNMGEkDNQUtWxnz0EA0vhk9+kFfmJuTW7F0625h91j/4O0YFOl6lpnkaOsKqnVrfVHT3gbstsh/dMqFN14w3Y/xcwxAJ
  privateKey: secret://unidentifiedDelivery.privateKey
  expiresDays: 7

shortCode:
  baseUrl: https://example.com/shortcodes/

storageService:
  uri: storage.example.com
  userAuthenticationTokenSharedSecret: secret://storageService.userAuthenticationTokenSharedSecret
  storageCaCertificates:
    - |
      -----BEGIN CERTIFICATE-----
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
      AAAAAAAAAAAAAAAAAAAA
      -----END CERTIFICATE-----

zkConfig:
  # FLT(uoemai): Key pair generated by the Whisper service component with the "zkparams" subcommand with added padding.
  serverPublic: AAK51fKwiJcO4RksMY2NX9xgiYf2QAITLffSjPru/jRgMoq7H9g2lRsmWmg9tZLY0deP9bb/dd9DyGRBEXuZFxucayWQKBT96ZphTtMrw1451atuth13eaJuiYh66wpoZtDp12omXr33bWfcnw3tQIt/E902+BFo0Jxq4yvj1xNu6gkXRoKejLx+TNiZV9uJbe5PWG9ZveFvCbs1NbGrjG84Px9qzSZoDwpgW+s1g9cC97x7J91HL9COthgus2FAd1pJPucej4KQVAHDo6XJ8QfRX5iwhs6p0IUX57aI4H0RUsk0KhJxM8xyXaEg6WsIQ7fYk187AjfEDio5CCmRKkCKoBUfuP5UiDsyo0mIQhS5xv0f78VF6V7ELfcXkbjQHJ6aryweshNHyRPyIjPEW62cVgjOAhYtC2VfBhOD2MYy3h0TPaXPOvXqonhT4kSIAO5RfH+hBvWtAE1wnauki2bmvESqmUXkgAI5cd2v26O3W3EnTaQofkT9O9zpTsKcQ5ipLGrrGNWakCMgmr0sOpIHUZLbobruqKdeLnY+ootB4N70oZOUsQ1SQqjLqNri3fk8iGt92SXxVk154zs8Unaszg1ZkfMOI6Ik5+YysB+g/eGg3zDf3qBt1sNZAtNlHYRvMGPkGG5RExm8BMAsC6XTAdDOLljmaUoZKKsnI+Iq8Lx8ZEbtgBmwRpEn++n20TkoMwmdaD/Koq8iSXoPHWP+p9Pkiw8oYrQ6s6F9JSJLB/qwbbNak4EuSS/JSrtODrzC1oEjD24xq1U5j7yU61u2tmVy67z22sEzQufS5LVU2Ff379UZq0E7KIRFXn6OyjIrzyb+TsEHidib5hyxVGhw02lrL4AseV9mgFUgrd8bkWLhLtuAKXI6kIN4YejVAQ==
  serverSecret: secret://zkConfig-libsignal-0.42.serverSecret

callingZkConfig:
  serverSecret: secret://callingZkConfig.serverSecret

backupsZkConfig:
  serverSecret: secret://backupsZkConfig.serverSecret

dynamicConfig:
  s3Region: us-east-1
  s3Bucket: whisper-service-dynamic-config
  objectKey: dev.yml
  maxSize: 100000
  refreshInterval: PT10S

remoteConfig:
  globalConfig: # keys and values that are given to clients on GET /v1/config
    EXAMPLE_KEY: VALUE

paymentsService:
  userAuthenticationTokenSharedSecret: secret://paymentsService.userAuthenticationTokenSharedSecret
  paymentCurrencies:
    # list of symbols for supported currencies
    - MOB
  externalClients:
    fixerApiKey: secret://paymentsService.fixerApiKey
    coinGeckoApiKey: secret://paymentsService.coinGeckoApiKey
    coinGeckoCurrencyIds:
      MOB: mobilecoin

badges:
  badges:
    - id: TEST
      category: other
      sprites: # exactly 6
        - sprite-1.png
        - sprite-2.png
        - sprite-3.png
        - sprite-4.png
        - sprite-5.png
        - sprite-6.png
      svg: example.svg
      svgs:
        - light: example-light.svg
          dark: example-dark.svg
  badgeIdsEnabledForAll:
    - TEST
  receiptLevels:
    '1': TEST

subscription: # configuration for Stripe subscriptions
  badgeExpiration: P30D
  badgeGracePeriod: P15D
  backupExpiration: P30D
  backupGracePeriod: P15D
  backupFreeTierMediaDuration: P30D
  levels:
    500:
      badge: EXAMPLE
      prices:
        # list of ISO 4217 currency codes and amounts for the given badge level
        xts:
          amount: '10'
          processorIds:
            STRIPE: price_example   # stripe Price ID
            BRAINTREE: plan_example # braintree Plan ID

oneTimeDonations:
  sepaMaximumEuros: '10000'
  boost:
    level: 1
    expiration: P90D
    badge: EXAMPLE
  gift:
    level: 10
    expiration: P90D
    badge: EXAMPLE
  currencies:
    # ISO 4217 currency codes and amounts in those currencies
    xts:
      minimum: '0.5'
      gift: '2'
      boosts:
        - '1'
        - '2'
        - '4'
        - '8'
        - '20'
        - '40'

registrationService:
  host: {{ include "common.fullname" . }}-registration-service
  port: 50051
  credentialConfigurationJson: '{ "irrelevant": true }' # Uses fake credentials during development.
  identityTokenAudience: irrelevant # Uses fake credentials during development.
  collationKeySalt: secret://registrationService.collationKeySalt
  registrationCaCertificate: irrelevant # Uses insecure channel during development.

# FLT(uoemai): Key transparency is disabled in the prototype.
keyTransparencyService:
  host: kt.example.com
  port: 443
  tlsCertificate: |
    -----BEGIN CERTIFICATE-----
    ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
    ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
    ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
    ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
    ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
    ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
    ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
    ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
    ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
    ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
    ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
    ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
    ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
    ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
    ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
    ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
    ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
    ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
    AAAAAAAAAAAAAAAAAAAA
    -----END CERTIFICATE-----
  clientCertificate: |
    -----BEGIN CERTIFICATE-----
    ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
    ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
    ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
    ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
    ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
    ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
    ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
    ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
    ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
    ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
    ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
    ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
    ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
    ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
    ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
    ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
    ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
    ABCDEFGHIJKLMNOPQRSTUVWXYZ/0123456789+abcdefghijklmnopqrstuvwxyz
    AAAAAAAAAAAAAAAAAAAA
    -----END CERTIFICATE-----
  clientPrivateKey: secret://keyTransparencyService.clientPrivateKey

turn:
  # FLT(uoemai): The Flatline prototype uses Coturn as a self-hosted replacement for Cloudflare.
  coturn:
    # FLT(uoemai): This secret must match the static-auth-secret configured in Coturn.
    secret: secret://turn.coturn.secret
    urls:
      - turn:turn.{{ .Values.global.hostname }}:3478
    urlsWithIps:
      - turn:%s
      - turn:%s:3478?transport=tcp
    credentialTtl: PT24H
    clientCredentialTtl: PT12H
    hostname: turn.{{ .Values.global.hostname }}

linkDevice:
  secret: secret://linkDevice.secret

noiseTunnel:
  webSocketPort: 8444
  directPort: 8445
  tlsKeyStoreFile: /usr/share/signal/noise-tunnel-keystore.p12
  tlsKeyStoreEntryAlias: flatline
  tlsKeyStorePassword: secret://noiseTunnel.tlsKeyStorePassword
  noiseStaticPrivateKey: secret://noiseTunnel.noiseStaticPrivateKey
  recognizedProxySecret: secret://noiseTunnel.recognizedProxySecret

externalRequestFilter:
  grpcMethods:
    - com.example.grpc.ExampleService/exampleMethod
  paths:
    - /example
  permittedInternalRanges:
    - 127.0.0.0/8

idlePrimaryDeviceReminder:
  minIdleDuration: P30D
